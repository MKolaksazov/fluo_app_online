# Fluo App Online

**Автор:** M. Kolaksazov, PhD  
**Година:** 2024  
**Лиценз:** Свободно за ползване и копиране

**Онлайн:** [fluo-app-online](https://fluo-app-online.onrender.com/)  
**Старият демо линк:** [GitHub Pages](https://mkolaksazov.github.io/Telerik-Academy/JavaScript/csv_tool/public/index.html)

---

## Описание
Fluo App Online е уеб приложение за извличане, обработка и анализ на експериментални флуоресцентни данни.  
Приложението работи с CSV или TXT файлове и позволява:

- Избор на колоните и редовете на данните
- Селекция на протоколи за флуорометър FluorPen 110 (PSI, Чехия): OJIP, NPQ1, NPQ2, NPQ3
- Чертане на графики на преходните OJIP и NPQ криви
- Изчисляване на средни стойности и присвояване на ново име на колоните
- Изчисляване на OJIP и NPQ параметри и чертане на графики
- Запис на обработените колони като CSV
- Графики реализирани чрез Chart.js

---

## Основни функционалности

1. **Отваряне на файлове**  
   - Поддържа CSV, TXT, TSV файлове.  
   - Автоматично разпознава разделителите (tab, запетая, точка и запетая) и десетичния разделител.  
   - Селекция на протоколите OJIP, NPQ1,2,3.

2. **Редакция на таблица**  
   - Подреждане на колоните, преименуване и средно изчисляване на стойности.  
   - Голям бутон за селекция/де-селекция на всички колони.  
   - Всяка колона има бутон за промяна на цвета и текстово поле за промяна на заглавието.

3. **Графики**  
   - **Transient (OJIP/NPQ)** – логаритмична ос за OJIP, линейна за NPQ.  
   - **Bar / Line Graphs** – визуализира избрани параметри като прости бар графики или разсейващи точки.  
   - **Boxplot** – статистическа значимост по Tukey HSD тест (p ≤ 0.05). Работи при минимум две повторения на всеки вариант с еднакви имена на колоните.

4. **Средни и преименуване**  
   - Изчисляване на средни стойности на избрани колони.  
   - Присвояване на ново име на колоната.

5. **Запис (експорт) на CSV**  
   - Износ на избраните колони в реда на селекцията.  
   - Необходима е парола за пълната версия.  
   - CSV форматиран с tab като разделител и "." като десетичен разделител.

---

## Как се използва приложението

1. Качете CSV/TXT файл и изберете разделителя.  
2. Изберете протокол за експерименталните данни (OJIP по подразбиране).  
3. Таблицата визуализира данните: редове = време/параметри, колони = експериментални проби.  
4. Селектирайте колоните за графики или изчисления. Поръчката на селекцията определя реда на визуализацията.  
5. Променете цвета или името на колоните при нужда.  
6. Записване: изберете колоните и натиснете бутона "save". Ако е необходима парола, въведете я.  
7. Графики:  
   - Transient – избор на колони и "draw transient"  
   - Bar/Line – избор на параметър и "draw bars / line"  
   - Boxplot – минимум две повторения на вариант и избор на колони

---

## Архитектура и технологии

- **Front-end:** HTML, CSS, JS, Chart.js  
- **Back-end:** Node.js, Express.js  
- **База данни:** MySQL или PostgreSQL (pool connections, async/await)  
- **CSV обработка:** csv-parser, json2csv  
- **Деплой:** Render.com

---

## API

| Method | Path | Описание |
|--------|------|----------|
| GET | `/api/data` | Връща списък с всички файлове от базата |
| GET | `/api/:id/csv` | Връща CSV на конкретен запис |
| POST | `/api/upload-csv` | Качва CSV към базата и го конвертира в JSON |
| DELETE | `/api/data/:id/csv` | Изтрива запис от базата |

---

## Контакти
M. Kolaksazov, PhD  
Email: m.kolaksazov@gmail.com

---

